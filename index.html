<!DOCTYPE html>
<html lang="en" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>motivated feedback generator</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gradient-to-br from-blue-50 via-blue-100 to-blue-200 flex items-center justify-center min-h-screen p-4 font-sans text-right">

    <div class="w-full max-w-3xl bg-white/95 backdrop-blur-sm p-6 rounded-2xl shadow-xl border border-blue-200">
        <h1 class="text-3xl font-bold text-center mb-6 text-blue-700">motivated feedback generator</h1>
        <p class="text-center text-blue-600 mb-8 leading-relaxed">
            Write any random feedback
        </p>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
            <div>
                <label for="classWork" class="block text-blue-800 font-medium mb-2">chapter number</label>
                <input type="number" id="classWork" class="w-full p-3 border border-blue-300 rounded-lg focus:ring-2 focus:ring-blue-500 text-right" min="1" placeholder="Example: 1">
            </div>
            <div>
                <label for="chapter" class="block text-blue-800 font-medium mb-2">Homework/Class Number</label>
                <input type="number" id="chapter" class="w-full p-3 border border-blue-300 rounded-lg focus:ring-2 focus:ring-blue-500 text-right" min="1" placeholder="Example: 5">
            </div>
        </div>

        <div class="mb-6">
            <label for="inputText" class="block text-blue-800 font-medium mb-2">
                Original feedback
            </label>
            <textarea
                id="inputText"
                class="w-full h-32 p-4 border border-blue-300 rounded-lg focus:ring-2 focus:ring-blue-500 resize-none text-right"
                placeholder="Example: الكلاس ورك محلول تمام والنوتس مكتوبه بس مش لكل الاسئله....الواجب محلول صح وبالخطوات بس مش مبعوت كامل"
            ></textarea>
        </div>

        <div class="mb-6">
            <label for="assistantName" class="block text-blue-800 font-medium mb-2">Assistant name </label>
            <input type="text" id="assistantName" class="w-full p-3 border border-blue-300 rounded-lg focus:ring-2 focus:ring-blue-500 text-right" placeholder="Example: eng.Jana">
        </div>

        <button
            id="rephraseButton"
            class="w-full py-3 px-4 bg-blue-600 text-white font-semibold rounded-lg shadow-md hover:bg-blue-700 transition duration-200 disabled:bg-blue-300"
        >
            Generate
        </button>

        <div id="error-message" class="mt-6 p-4 bg-red-100 border border-red-300 rounded-lg text-red-700 hidden">
            <p class="font-semibold">Error:</p>
            <p id="error-text"></p>
        </div>

        <div id="rephrased-output" class="mt-8 p-6 bg-blue-50 border border-blue-300 rounded-lg shadow-inner hidden">
            <h2 class="text-xl font-semibold text-blue-700 mb-3">After generation</h2>
            <p id="rephrased-text" class="text-blue-900 leading-relaxed whitespace-pre-line"></p>
        </div>
    </div>

    <script>
    document.addEventListener('DOMContentLoaded', () => {
        const classWorkInput = document.getElementById('classWork');
        const chapterInput = document.getElementById('chapter');
        const inputTextarea = document.getElementById('inputText');
        const assistantNameInput = document.getElementById('assistantName');
        const rephraseButton = document.getElementById('rephraseButton');
        const rephrasedOutput = document.getElementById('rephrased-output');
        const rephrasedText = document.getElementById('rephrased-text');
        const errorMessage = document.getElementById('error-message');
        const errorText = document.getElementById('error-text');

        rephraseButton.addEventListener('click', async () => {
            const classWork = classWorkInput.value.trim();
            const chapter = chapterInput.value.trim();
            const feedback = inputTextarea.value.trim();
            const assistantName = assistantNameInput.value.trim() || 'اسم الاسيستنت';

            if (!classWork || !chapter || !feedback) {
                errorMessage.classList.remove('hidden');
                errorText.textContent = 'Please fill all fields (class work, chapter, and feedback).';
                rephrasedOutput.classList.add('hidden');
                return;
            }

            rephraseButton.disabled = true;
            rephraseButton.textContent = 'Generating...';
            errorMessage.classList.add('hidden');
            rephrasedOutput.classList.add('hidden');

            const prompt = `أنت مساعد تدريس ممتاز ومحفز. مهمتك هي تحويل أي ملاحظة سلبية إلى رسالة إيجابية ومحفزة جداً للطلاب بالعامية المصرية. اجعل الرسالة قصيرة، وودية، واختمها بـ "❤️".

الملاحظة الأصلية هي: ${feedback}
المخرج: `;

            try {
                const payload = {
                    contents: [{ parts: [{ text: prompt }] }]
                };

                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=AIzaSyANrG0AWkE2tcSezEUjF3chlgnA5am8eZY`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                const result = await response.json();
                const rephrased = result?.candidates?.[0]?.content?.parts?.[0]?.text;
                
                if (rephrased) {
                    const finalMessage = `
مكتب دكتور ناصر البطل لمادة ال Chemistry يرحب بكم ❤️
———————————————
الاول طبعًا انا عاوز اشكرك جدًا علي التزامك انك بعت الكلاس ورك والهوم ورك ❤️

Class work lesson ( ${classWork} ) chapter ( ${chapter} )
Homework lesson ( ${classWork} ) chapter ( ${chapter} )
و حابب اقولك ان الفيدباك علي الفايل بتاعك كان:

${rephrased.trim()}

${assistantName}`;
                    
                    rephrasedOutput.classList.remove('hidden');
                    rephrasedText.textContent = finalMessage;
                } else {
                    errorMessage.classList.remove('hidden');
                    errorText.textContent = 'Server communication error. Please try again.';
                }
            } catch (e) {
                errorMessage.classList.remove('hidden');
                errorText.textContent = 'Unexpected error. Please check your internet connection and try again.';
            } finally {
                rephraseButton.disabled = false;
                rephraseButton.textContent = 'Generate another message';
            }
        });
    });
    </script>
</body>
</html>
